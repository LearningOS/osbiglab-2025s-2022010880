# 0508 进展报告

这段时间一直很难受，在调各种奇奇怪怪的bug，浪费了大量的时间。

- 实现了进程线程相关的内容，重构现有代码
- 修复了syscall_trace在没有参数时生成多余逗号的问题
- 然后发现进程异常退出时逻辑的问题（例如段错误或者未实现的系统调用），必须走流程退出，否则信号或者wait相关的逻辑不能正确触发
- 进程线程实现：质疑-理解-成为，也是封装了一个额外的库，很多地方参考了，但总体上是自己完成的
- 发现execve引发的内存泄漏问题，有没有更好的解决方法
- 发现并且尝试解决了x86_64下面段错误的问题，没有正确设置FS
- 发现并且解决了IO相关的问题
- write缓冲区来自用户空间，地址翻译（转为物理地址）的方法太简单粗放，导致问题。增加了一个拷贝的逻辑，得到解决。而read因为恰好存在一个复制的行为，因此没出问题
- 然后发现stat的inode一致导致的问题
- 解决了动态库加载问题
- 栈地址没有16字节对齐导致的xmm指令GP异常问题
- 解决了加载进程时栈地址对齐问题，之前如果不巧有环境变量和参数数量为偶数的时候，那么就不对齐
- 移植了signal相关的内容，目前出现异常

接下来的计划：

- 完善signal
- iozone内存共享
- ltp的meminfo
